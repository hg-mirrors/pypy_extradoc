
PyPy EuroPython 2005 sprint planning (1st-7th July)
-------------------------------------------------------

overall time planning:: 

    1st-3rd July (both including) we sprint at Chalmers from 10am-open 

    4th July is "break" time, afternoon visiting sites together? 

    5th July sprint from 10am-open at Laura's house 
             (Goetabergsgatan 22)
    -7th sprint continues from 10am-open at laura's house 

3rd July evening: Going to Hitchhikers Guide? 



1st July start at 10am:: 
    - holger starts the session 

    - introduction to PyPy 
        high level architecture (Armin or Holger?)

    - introduction to Annotation + RTyping?  (Samuele or Armin)
        working on examples

    - introduction to LLVM2 + status 
        Carl, holger

    - status of Parser efforts

    - introduction to GenC + status
        Armin 

other suggested events:: 
    3rd July 5pm: Bert talks about Squeak's VM architecture 

we decide about pairing at the venue (after everybody tells 
what he/she is interested in). These are the people expected currently:: 

    Gustavo Niemeyer      until 3rd (including)

    Adrien Di Mascio      until 4th (including)

    Carl Friedrich Bolz   until 5th afternoon
    Richard Emslie        whole-time (until 10th)

    Armin Rigo            whole-time  

    Niklaus Haldimann     until 4th (including)

    Ludovic Aubry         until 4th (including)
    Anders Chrigstroem    whole-time (likely) 
    Anders Qvist          whole-time (likely)
    Holger Krekel         whole-time 
    Jacob Hallen          whole-time
    Christian Tismer      whole-time 
    Laura Creighton       whole-time
    Samuele Pedroni       whole-time  

    Eric van Riet Paap    until 8th 
    Bert Freudenberg      whole-time

    Beatrice Duering   (visiting, 5th-)

Translation tasks 
------------------

* currently remaining rtyper topics: 

  - found to be missing (ale, arigo)::

            Builtins
            --------

            (strange)(delegating to backend?) sys.getrefcount
            (medium) applevel sys module should not refer to 
                     interplevel sys.getdefaultencoding
            (generate c_api calls) os.path.exists 
            (generate c_api calls) os.path.isdir 

            Unary operations
            ----------------

            rclass: (easy) issubtype

            Overridden functions in PyPy
            ----------------------------

            (easy) override:ignore
            (easy) override:instantiate
            (hard, probably needs to be implemented at C/CPython level): 
                override:wrap_exception_cls
                override:fake_object
                override:cpy_compile

* (partially DONE) convert each file that does 
  'from ... import *' to use explicit imports (e.g. 
  from pypy.rpython import lltype and then use lltype.*) 

* fix floats::
    - translator/c/float_include.h should catch floating-point signals
      with a technique similar to CPython's.
    - objspace/std/floatobject.py needs some clean-ups:
      look for XXX, for %reimplement% and for all try:except: blocks.


Move to Python 2.4.1
----------------------- 

subcoach: Armin
Niklaus, Arre, Anders

experiment in a branch with using Python 2.4 semantics 
and the standard library 

* (MOSTLY DONE) use lib-python/2.4.1 instead of 2.3.4, review all 
  modified tests and library modules (good progress, we still need to
  review ca. 1 modified test files) 

* Merge 2.4.1 branch (blocked by parser/compiler being able 
  to process 2.4.1 files on top of CPython 2.3.4) 

* DONE: semantic differences: comparison of recursive 
  data structures, more? 

* new required C-level modules: 
     - DONE: 'sets'
     - (mostly naively mostly done) implement 'collections' module
     - (probably) revert 'bisect' module to the 2.3 version (or 2.5)
     - (probably) revert 'heapq' module to the 2.3 version (2.5)

* check that test results page still works (and fix) after
  we merged 2.4.1 branch 
  

Misc
-------- 

* (medium) write a tool that discovers which revision of the pypy tree 
  broke the high level annotator (in that it produced SomeObjects). 
  Consider distributing the actual annotation to multiple hosts. 

* (medium) finish objspace/std/longobject.py.
  - (MOSTLY DONE) div implementation (christian, jacob)

* (hard, starting soon to be discussed) find a way 
  to generate c_api calls (including automated 
  conversions from ll-strings to c-like strings)
  -> conceptually discussed, needs to be written 
  down and posted to pypy-dev (samuele/holger)

* fix Windows-related issues

* '%'-formatting rounding errors  (  '%.3f' % (2.999999,))

* (mostly done) add missing docstrings on app-level built-in types and 
  functions, etc. (Laura): there now is a program that generates the 
  docstrings into the appropriate places but it needs prettification. 

* (should start sometime soon) GC discussion in the middle of the sprint  
  (kickoff Carl Friedrich with Armin/Samuele) 

* DONE: (should start sunday) _sre module reimplementation kickoff 

Rewriting important C functionality in Python 
--------------------------------------------------

* parsing/compiling  (Adrien)

    * (PROGRESS): translate to C (fix annotation problems by either
      tweaking the code or extending the annotator on 
      a case-by-case basis).  
        - (DONE) Parser is fully annotable
        - not translated and run in C, yet. 

    * (DONE) parser integrated in PyPy ("py.py --pyparse" for
      non-interactive usage), needs more testing. 

    * (progress, Ludovic, Adrien) try to make 2.4.1 compiler 
      package work for PyPy and using the parser. 
        
    * move towards a rpython compliant (translatable) compiler 

* rewrite in Python a C module you are familiar with
  (partial list of missing/incomplete modules: math, array,
  regular expressions, binascii...)

* (Jacob, progress) binascii implementation, needs more tests 
                    (but compliancy tests already pass) 

* implement Python 2.3's import hook extensions (zip-imports etc.)

* (hard) weakrefs (but this requires discussion and planning on pypy-dev
  before the sprint! feel free to start such a discussion, though.)


LLVM Backend
-------------------

- (DONE, eric, bert) make llvm work on osx 

- (DONE) arrays work (special case of variable sized structs) 

- (PROGRESS, cfbolz, hpk) implement variable 
  sized structs 

- DONE: (Eric, Bert) added some void-helpers to Structs 
     
- there are problems with voids all around the flowgraph, 
  which is being reduced by a cfg transformation

- DONE: support function pointers 

- implement exceptions  

- (DONE, bert, eric) try to integrate Boehm GC

after 9am at Lauras place: 
Niklaus, Adrien, Arre, Christian, Ludovic, (Samuele and Eric for a bit), 

next sprint: in heidelberg end of august: very likely 22nd-29th August 
    (Carl will try to fix this until 15th July) 
next sprint after that: supposedly in Paris, no dates yet 
