\documentclass[utf8x]{beamer}

\mode<presentation>
{
  \usetheme{Warsaw}

  %\setbeamercovered{transparent}
}


\usepackage[english]{babel}

\usepackage[utf8x]{inputenc}

\usepackage{times}
\usepackage[T1]{fontenc}

\title{How to \emph{not} write Virtual Machines for Dynamic Languages}

\author{Carl Friedrich Bolz and Armin Rigo}

\institute[Heinrich-Heine-Universität Düsseldorf]
{
  Institut für Informatik\\
  Heinrich-Heine-Universität Düsseldorf
}

\date{3rd Workshop on Dynamic Languages and Applications, July 31 2007}

\pgfdeclareimage[height=0.5cm]{pypy-logo}{image/py-web.png}
\logo{\pgfuseimage{pypy-logo}}



% Delete this, if you do not want the table of contents to pop up at
% the beginning of each subsection:
%\AtBeginSubsection[]
%{
%  \begin{frame}<beamer>
%    \frametitle{Outline}
%    \tableofcontents[currentsection,currentsubsection]
%  \end{frame}
%}


% If you wish to uncover everything in a step-wise fashion, uncomment
% the following command: 

%\beamerdefaultoverlayspecification{<+->}


\begin{document}

\begin{frame}
  \titlepage
\end{frame}

%\begin{frame}
%  \frametitle{Outline}
%  \tableofcontents
  % You might wish to add the option [pausesections]
%\end{frame}

\begin{frame}
  \frametitle{Introduction}
  \begin{itemize}
  \item XXX intro, talk about scope
  \end{itemize}
\end{frame}


\begin{frame}
  \frametitle{Common Approaches to VM construction}
  \begin{block}{
    Using C directly (or C disguised as another language)}
    \begin{itemize}
    \item
      CPython
    \item
      Ruby
    \item
      Spidermonkey (Mozilla's JavaScript VM)
    \item
      but also: Squeak, Scheme48
    \end{itemize}
  \end{block}
  \begin{block}{
    Building on top of an existing OO VM}
    \begin{itemize}
    \item
      Jython, IronPython
    \item
      JRuby, IronRuby
    \end{itemize}
  \end{block}
\end{frame}

\begin{frame}
  \frametitle{The Problems of C}
  When writing a VM in C it is hard to reconcile:
  \begin{itemize}
  \item
    flexibility, maintainability
  \item
    simplicity of the VM
  \item
    performance (needs dynamic compilation techniques)
  \end{itemize}
  \pause
  \begin{block}{
    Python Case}
    \begin{itemize}
    \item
      \alert{CPython} is a very simple bytecode VM, performance not great
    \item
      \alert{Psyco} is a just-in-time-specializer, very complex, hard to
      maintain, but good performance
    \item
      \alert{Stackless} is a fork of CPython adding microthreads. It was never
      incorporated into CPython for complexity reasons
    \end{itemize}
  \end{block}
\end{frame}

\begin{frame}
  \frametitle{Compilers are a bad encoding of Semantics}
  \begin{itemize}
  \item to reach good performance levels, dynamic compilation is often needed
  \item a dynamic compiler needs to encoding language semantics
  \item this encoding is often relatively obscure and hard to change
  \end{itemize}
  \pause
  \begin{block}{
    Python Case}
    \begin{itemize}
    \item
      Psyco is a dynamic compiler for Python
    \item
      synchronizing with CPython's rapid development is a lot of effort
    \item
      many of CPython's new features not supported well
    \end{itemize}
  \end{block}
\end{frame}

\begin{frame}
  \frametitle{Fixing of Early Design Decisions}
  \begin{itemize}
  \item when starting a VM in C, many decisions need to be made immediately
  \item examples: memory management technique, threading model
  \item the decision is manifested throughout the VM source
  \item very hard to change later
  \end{itemize}
  \pause
  \begin{block}{
    Python Case}
    \begin{itemize}
    \item
      CPython uses reference counting, increfs and decrefs everywhere
    \item
      CPython uses OS threads with one global lock, hard to change to
      lightweight threads or finer locking
    \end{itemize}
  \end{block}
\end{frame}

\begin{frame}
  \frametitle{Implementation Proliferation}
  \begin{itemize}
  \item
    restrictions of the original implementation lead to re-implementations,
    forks
  \item
    all implementations need to be syncronized with language evolution
  \item
    lots of duplicate effort
  \end{itemize}
  \pause
  \begin{block}{
    Python Case}
    \begin{itemize}
    \item
      several serious implementations: CPython, Stackless, Psyco, Jython,
      IronPython, PyPy
    \item
      the implementations have various grades of compliance
    \end{itemize}
  \end{block}
\end{frame}

\begin{frame}
  \frametitle{Title}
  \begin{itemize}
  \item
  \end{itemize}
\end{frame}


\end{document}


